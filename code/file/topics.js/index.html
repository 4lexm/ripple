<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>topics.js</title><script src="/ripple/_content/scripts/jquery-1.8.2.min.js" type="text/javascript"></script><script src="/ripple/_content/scripts/prettify.js" type="text/javascript"></script><script src="/ripple/_content/scripts/bootstrap-prettify.js" type="text/javascript"></script><link type="text/css" rel="stylesheet" href="/ripple/_content/styles/sons-of-obsidian.css" /></head><body><h1>topics.js</h1><pre class="prettyprint lang-js linenums:1 prettyprinted" id="snippet" data-linenums="1" style=""><ol class="linenums"><li value="1" class="L0"><span class="pln">$</span><span class="pun">(</span><span class="pln">document</span><span class="pun">).</span><span class="pln">ready</span><span class="pun">(</span><span class="kwd">function</span><span class="pln"> </span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span></li><li class="L1"><span class="pln"> </span></li><li class="L2"><span class="pln">    </span><span class="kwd">var</span><span class="pln"> sections </span><span class="pun">=</span><span class="pln"> $</span><span class="pun">(</span><span class="str">'section'</span><span class="pun">);</span></li><li class="L3"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">sections</span><span class="pun">.</span><span class="pln">size</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></li><li class="L4"><span class="pln">        $</span><span class="pun">(</span><span class="str">'.sidebar h3.half-margin'</span><span class="pun">).</span><span class="pln">hide</span><span class="pun">();</span></li><li class="L5"><span class="pln">    </span><span class="pun">}</span></li><li class="L6"><span class="pln">    </span><span class="kwd">else</span><span class="pln"> </span><span class="pun">{</span></li><li class="L7"><span class="pln">        </span><span class="kwd">var</span><span class="pln"> toc </span><span class="pun">=</span><span class="pln"> $</span><span class="pun">(</span><span class="str">"#page-toc"</span><span class="pun">);</span></li><li class="L8"><span class="pln">        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">toc</span><span class="pun">.</span><span class="pln">find</span><span class="pun">(</span><span class="str">'li'</span><span class="pun">).</span><span class="pln">size</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></li><li class="L9"><span class="pln">            sections</span><span class="pun">.</span><span class="pln">each</span><span class="pun">(</span><span class="kwd">function</span><span class="pun">(</span><span class="pln">i</span><span class="pun">,</span><span class="pln"> section</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></li><li class="L0"><span class="pln">                </span><span class="kwd">var</span><span class="pln"> id </span><span class="pun">=</span><span class="pln"> $</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">).</span><span class="pln">attr</span><span class="pun">(</span><span class="str">'id'</span><span class="pun">);</span></li><li class="L1"><span class="pln">                </span><span class="kwd">var</span><span class="pln"> heading </span><span class="pun">=</span><span class="pln"> $</span><span class="pun">(</span><span class="str">'.section-header'</span><span class="pun">,</span><span class="pln"> section</span><span class="pun">).</span><span class="pln">text</span><span class="pun">();</span></li><li class="L2"><span class="pln"> </span></li><li class="L3"><span class="pln">                $</span><span class="pun">(</span><span class="str">'&lt;li&gt;&lt;a href="#'</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> id </span><span class="pun">+</span><span class="pln"> </span><span class="str">'"&gt;'</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> heading </span><span class="pun">+</span><span class="pln"> </span><span class="str">'&lt;/a&gt;'</span><span class="pun">).</span><span class="pln">appendTo</span><span class="pun">(</span><span class="str">"#page-toc"</span><span class="pun">);</span></li><li class="L4"><span class="pln">            </span><span class="pun">});</span></li><li class="L5"><span class="pln">        </span><span class="pun">}</span></li><li class="L6"><span class="pln">    </span><span class="pun">}</span></li><li class="L7"><span class="pln"> </span></li><li class="L8"><span class="pln">    $</span><span class="pun">(</span><span class="str">'#page-toc'</span><span class="pun">).</span><span class="pln">affix</span><span class="pun">();</span></li><li class="L9"><span class="pln"> </span></li><li class="L0"><span class="pln">    $</span><span class="pun">(</span><span class="str">'a.edit-link'</span><span class="pun">).</span><span class="pln">click</span><span class="pun">(</span><span class="kwd">function</span><span class="pln"> </span><span class="pun">(</span><span class="pln">e</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></li><li class="L1"><span class="pln">        $</span><span class="pun">.</span><span class="pln">ajax</span><span class="pun">({</span></li><li class="L2"><span class="pln">            type</span><span class="pun">:</span><span class="pln"> </span><span class="str">"POST"</span><span class="pun">,</span></li><li class="L3"><span class="pln">            url</span><span class="pun">:</span><span class="pln"> $</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">).</span><span class="pln">data</span><span class="pun">(</span><span class="str">'url'</span><span class="pun">),</span></li><li class="L4"><span class="pln">            data</span><span class="pun">:</span><span class="pln"> </span><span class="pun">{</span><span class="typ">Key</span><span class="pun">:</span><span class="pln"> $</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">).</span><span class="pln">data</span><span class="pun">(</span><span class="str">'key'</span><span class="pun">)},</span></li><li class="L5"><span class="pln">            dataType</span><span class="pun">:</span><span class="pln"> </span><span class="str">'json'</span></li><li class="L6"><span class="pln">        </span><span class="pun">});</span></li><li class="L7"><span class="pln"> </span></li><li class="L8"><span class="pln">        e</span><span class="pun">.</span><span class="pln">preventDefault</span><span class="pun">();</span></li><li class="L9"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span></li><li class="L0"><span class="pln">    </span><span class="pun">});</span></li><li class="L1"><span class="pun">});</span></li></ol></pre></body></html>